#!/bin/bash

# see https://unix.stackexchange.com/questions/622961/how-to-use-column-with-tput-colors
# https://stackoverflow.com/questions/72669539/sed-to-add-color-to-column-for-a-specific-pattern

# the only robust coloring we could get is the first string, after exactly n spaces. Wrapped columns would be colored otherwise

docs=(
  "cmd1||Run cmd1."
  "cmd3||Bla bla bla long text Bla bla bla long text Bla bla bla long text Bla bla bla long text."
  "cmd2|[N]|Do something with N."
)

column -t \
  --separator "|" \
  --output-width 60 \
  --table \
  --table-noheadings \
  --table-wrap C3 \
  --table-columns C1,C2,C3 < <(printf "%s\n" "${docs[@]}")

# cmd1       Run cmd1.
# cmd3       Bla bla bla long text Bla bla bla long text Bla b
#            la bla long text Bla bla bla long text.
# cmd2  [N]  Do something with N.

docs=(
  "$(tput setaf 1)cmd1$(tput sgr0)||Run cmd1."
  "cmd3||Bla bla bla long text Bla bla bla long text Bla bla bla long text Bla bla bla long text."
  "cmd2|[N]|Do something with N."
)

column -t \
  --separator "|" \
  --output-width 60 \
  --table \
  --table-noheadings \
  --table-wrap C3 \
  --table-columns C1,C2,C3 < <(printf "%s\n" "${docs[@]}")

# cmd1       Run cmd1.
# cmd3                           Bla bla bla long text Bla bla
#                                 bla long text Bla bla bla lo
#                                ng text Bla bla bla long text
#                                .
# cmd2                      [N]  Do something with N.
